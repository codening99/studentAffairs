e# studentAffairs

## 建表约定

| 数据表名  | 唯一主键 |
| --------- | -------- |
| 包名_类名 | 类名_id  |

## 权限表

| competence_id(二进制计数，权限可以累加) | 对应十进制数 | 权限名     | 权限说明           |
| --------------------------------------- | ------------ | ---------- | ------------------ |
| 1                                       | 1            | 管理员权限 | 所有操作都可以进行 |
| 10                                      | 2            | 老师权限   |                    |
| 100                                     | 4            | 学生权限   |                    |



## 数据库表

## ajax请求接口

### 登录

| 提交地址            | 参数     | 参数说明                         |
| ------------------- | -------- | -------------------------------- |
| /login?action=login | type     | 类型（1：教师登录  2：学生登录） |
|                     | account  | 账号或学号                       |
|                     | password | 密码                             |

**返回json数据格式**

| 数据段名 | 数据类型 | 数据内容         | 数据说明     |
| -------- | -------- | ---------------- | ------------ |
| event    | int      | 返回状态信息     |              |
|          |          | 0                | 登录成功     |
|          |          | 1                | 用户名不存在 |
|          |          | 2                | 密码错误     |
| msg      | string   | 返回提示消息内容 |              |

### 获取在线状态

| 提交地址                      | 参数 | 参数说明 |
| ----------------------------- | ---- | -------- |
| /login?action=getOnlineStatus |      |          |

**返回json数据格式**

| 数据段名 | 数据类型 | 数据内容         | 数据说明 |
| -------- | -------- | ---------------- | -------- |
| event    | int      | 返回状态信息     |          |
|          |          | 0                | 未登录   |
|          |          | 1                | 在线中   |
| msg      | string   | 返回提示消息内容 |          |